---
// src/components/layout/Navbar.astro
import { Menu, X, ChevronDown, Heart } from 'lucide-react';

const menuItems = [
  { label: "Home", href: "/" },
  { 
    label: "About Us", 
    children: [
      { label: "History", href: "/history" },
      { label: "Doctrine", href: "/doctrine" },
      { label: "Leadership Team", href: "/leadership-team" },
    ]
  },
  { label: "Our Churches", href: "/our-churches" },
  { label: "Our Ministries", href: "/our-ministries" },
  { label: "Missionaries", href: "/missionaries" },
  { 
    label: "Missions Trips", 
    children: [
      { label: "Previous Trips", href: "/past-trips" },
      { label: "Potential Trips", href: "/potential-trips" },
    ]
  },
  { label: "Contact Us", href: "/contact-us" },
];
---

<div class="drawer drawer-end z-50">
  <input id="mobile-menu" type="checkbox" class="drawer-toggle" />
  
  <div class="drawer-content flex flex-col">
    <nav class="navbar sticky top-0 z-40 px-4 sm:px-8 backdrop-blur-md bg-white/90 border-b border-slate-100/50 h-20">
      
      <div class="navbar-start">
        <a href="/" class="hover:opacity-80 transition-opacity">
          <img src="/logo2.svg" alt="Lampei Logo" class="h-10 w-auto" />
        </a>
      </div>

      <div class="navbar-center hidden lg:flex">
        <ul class="menu menu-horizontal px-1 gap-1">
          {menuItems.map((item) => (
            <li class="group">
              {item.children ? (
                <details class="group-hover:open">
                  <summary class="nav-link font-medium text-slate-600 hover:text-blue-600 flex items-center gap-1 cursor-pointer">
                    {item.label}
                    <ChevronDown className="w-4 h-4 opacity-50" />
                  </summary>
                  <ul class="p-2 w-52 bg-white shadow-xl border border-slate-100 rounded-xl mt-2 animate-fade-in-up">
                    {item.children.map((subItem) => (
                      <li><a href={subItem.href} class="py-2 text-slate-600 hover:text-blue-600 hover:bg-blue-50">{subItem.label}</a></li>
                    ))}
                  </ul>
                </details>
              ) : (
                <a href={item.href} class="nav-link font-medium text-slate-600 hover:text-blue-600">{item.label}</a>
              )}
            </li>
          ))}
        </ul>
      </div>

      <div class="navbar-end gap-4">
        <a href="/donate" class="hidden sm:flex btn border-none bg-blue-600 text-white rounded-full px-6 hover:bg-blue-700 transition-all shadow-lg shadow-blue-500/20">
          Donate
        </a>
        
        <label for="mobile-menu" class="btn btn-ghost lg:hidden hover:bg-slate-100">
          <Menu className="h-6 w-6 text-slate-700" />
        </label>
      </div>
    </nav>
  </div> 

  <div class="drawer-side lg:hidden">
    <label for="mobile-menu" aria-label="close sidebar" class="drawer-overlay"></label>
    <div class="menu p-6 w-80 min-h-full bg-white text-slate-900">
      <div class="flex justify-between items-center mb-10">
        <img src="/logo2.svg" alt="Logo" class="h-8" />
        <label for="mobile-menu" class="btn btn-sm btn-circle btn-ghost"><X size={24}/></label>
      </div>
      
      <ul class="space-y-2">
        {menuItems.map((item) => (
          <li>
            {item.children ? (
              <details>
                <summary class="text-lg font-serif font-bold py-3">{item.label}</summary>
                <ul class="ml-4 border-l-2 border-slate-100 pl-4 space-y-2">
                  {item.children.map((subItem) => (
                    <li><a href={subItem.href} class="text-slate-600 py-2">{subItem.label}</a></li>
                  ))}
                </ul>
              </details>
            ) : (
              <a href={item.href} class="text-lg font-serif font-bold py-3">{item.label}</a>
            )}
          </li>
        ))}
      </ul>

      <div class="mt-auto pt-10">
        <a href="/donate" class="btn btn-primary w-full rounded-2xl gap-2 h-14">
          <Heart size={20} className="fill-current" /> Support the Mission
        </a>
      </div>
    </div>
  </div>
</div>

<style>
  .nav-link { position: relative; }
  .nav-link::after {
    content: '';
    position: absolute;
    width: 0;
    height: 2px;
    bottom: -4px;
    left: 0;
    background-color: #2563eb;
    transition: width 0.3s ease;
  }
  li:hover > .nav-link::after { width: 100%; }
  
  @keyframes fadeInUp {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }
  .animate-fade-in-up { animation: fadeInUp 0.2s ease-out forwards; }
</style>