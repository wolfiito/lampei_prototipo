---
import { Menu, ChevronDown } from 'lucide-react';

// Datos del menú (Igual que antes)
const menuItems = [
  { label: "Home", href: "/" },
  { 
    label: "About Us", 
    children: [
      { label: "History", href: "/history" },
      { label: "Doctrine", href: "/doctrine" },
      { label: "Leadership Team", href: "/leadership-team" },
    ]
  },
  { label: "Our Churches", href: "/our-churches" },
  { label: "Our Ministries", href: "/our-ministries" },
  { label: "Missionaries", href: "/missionaries" },
  { 
    label: "Missions Trips", 
    children: [
      { label: "Previous Trips", href: "/past-trips" },
      { label: "Potential Trips", href: "/potential-trips" },
    ]
  },
  { label: "Contact Us", href: "/contact-us" },
];
---

<div class="navbar sticky top-0 z-50 px-4 sm:px-8 font-sans transition-all duration-300 backdrop-blur-md bg-white/90 border-b border-slate-100/50 supports-[backdrop-filter]:bg-white/60">
  
  <div class="navbar-start">
    
    <div class="dropdown">
      <div tabindex="0" role="button" class="btn btn-ghost lg:hidden hover:bg-slate-100">
        <Menu className="h-6 w-6 text-slate-700" />
      </div>
      <ul tabindex="0" class="menu menu-sm dropdown-content mt-3 z-[1] p-2 shadow-2xl bg-white rounded-xl w-64 border border-slate-100">
        {menuItems.map((item) => (
          <li>
            {item.children ? (
              <details>
                <summary class="font-medium text-slate-700">{item.label}</summary>
                <ul class="p-2 border-l-2 border-slate-100 ml-2">
                  {item.children.map((subItem) => (
                    <li><a href={subItem.href} class="text-slate-600">{subItem.label}</a></li>
                  ))}
                </ul>
              </details>
            ) : (
              <a href={item.href} class="font-medium text-slate-700">{item.label}</a>
            )}
          </li>
        ))}
        <li class="mt-4"><a href="/donate" class="btn btn-primary btn-sm text-white w-full">Donate</a></li>
      </ul>
    </div>

    <a href="/" class="btn btn-ghost text-xl p-0 hover:bg-transparent flex items-center gap-2">
      <img 
          src="../../../public/logo2.svg" 
          alt="Lampei Logo" 
          class="h-10 w-auto object-contain" 
      />
  </a>
  </div>

  <div class="navbar-center hidden lg:flex">
    <ul class="menu menu-horizontal px-1 gap-1">
      {menuItems.map((item) => (
        <li class="group">
          {item.children ? (
            <details class="group-hover:open">
              <summary class="nav-link font-medium text-slate-600 hover:text-primary transition-colors flex items-center gap-1 cursor-pointer">
                {item.label}
                <ChevronDown className="w-4 h-4 opacity-50 group-hover:opacity-100 transition-opacity" />
              </summary>
              <ul class="p-2 w-52 bg-white shadow-xl border border-slate-100 rounded-xl mt-2 animate-fade-in-up">
                {item.children.map((subItem) => (
                  <li>
                    <a href={subItem.href} class="py-2 text-slate-600 hover:text-primary hover:bg-slate-50 rounded-lg">
                        {subItem.label}
                    </a>
                  </li>
                ))}
              </ul>
            </details>
          ) : (
            <a href={item.href} class="nav-link font-medium text-slate-600 hover:text-primary transition-colors relative">
                {item.label}
            </a>
          )}
        </li>
      ))}
    </ul>
  </div>

  <div class="navbar-end">
    <a href="/donate" class="btn border-none bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg shadow-blue-500/30 hover:shadow-blue-500/50 hover:scale-105 transition-transform rounded-full px-6 font-semibold tracking-wide">
      Donate
    </a>
  </div>
</div>

<style>
  /* MEJORA 2: Animación de subrayado elegante */
  .nav-link {
    position: relative;
  }
  
  .nav-link::after {
    content: '';
    position: absolute;
    width: 0;
    height: 2px;
    bottom: -4px; /* Un poco separado del texto */
    left: 0;
    background-color: theme('colors.blue.600'); /* Usa el color de Tailwind */
    transition: width 0.3s ease-in-out;
  }

  /* Al hacer hover en el <li> padre, expandimos la línea */
  li:hover > .nav-link::after {
    width: 100%;
  }

  /* Animación suave para el submenu */
  @keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
  }
  .animate-fade-in-up {
    animation: fadeInUp 0.2s ease-out forwards;
  }
</style>